<!doctype html>
<meta charset="utf-8">
<title>Peli</title>
<style>
	canvas {
		width: 640px;
		height: 360px;

		border: 1px solid;
	}
</style>

<body>

<canvas>
</canvas>

<script>
	let log = console.log

	const WIDTH = 17
	const HEIGHT = 10

	const TILE_WIDTH = 16
	const TILE_HEIGHT = 16

	let tiles = [
		0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
		0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
		0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0,
		0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0,
		0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0,

		0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
		0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0,
		0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
		0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0,
		0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
	]

	let c = document.querySelector('canvas')

	let ctx = c.getContext('2d')

	function tile(x, y) {
		// log('tile', x, y)
		let xStart = x * TILE_WIDTH
		let yStart = y * TILE_HEIGHT

		let content = tiles[WIDTH * y + x]
		if (content === 0) {
			ctx.fillStyle = '#f4b27d'
		} else if (content === 1) {
			ctx.fillStyle = '#98c23d'
		} else if (content === 2) {
			ctx.fillStyle = '#ff9061'
		}

		ctx.fillRect(xStart, yStart, TILE_WIDTH, TILE_HEIGHT)
	}

	for (let x = 0; x < WIDTH; x++) {
		for (let y = 0; y < HEIGHT; y++) {
			tile(x, y)
		}
	}

	let playerX = 0.5 * (0 + WIDTH)
	let playerY = 0.5

	drawPlayer()

	function drawPlayer() {
		ctx.fillStyle = '#000000'
		ctx.fillRect(playerX * TILE_WIDTH, playerY * TILE_HEIGHT, 1, 1)
	}

	let keys = {
		up: 0,
		down: 0,
		left: 0,
		right: 0,
	}

	function keydown(event) {
		let keyCode = event.keyCode
		event.preventDefault()
		if (event.repeat) {
			return
		}

		if (keyCode === 38) {
			keys.up = 1
		} else if (keyCode === 40) {
			keys.down = 1
		} else if (keyCode === 37) {
			keys.left = 1
		} else if (keyCode === 39) {
			keys.right = 1
		}

		log('down', keyCode, keys)
	}

	function keyup(event) {
		let keyCode = event.keyCode
		event.preventDefault()

		if (event.repeat) {
			return
		}

		if (keyCode === 38) {
			keys.up = 0
		} else if (keyCode === 40) {
			keys.down = 0
		} else if (keyCode === 37) {
			keys.left = 0
		} else if (keyCode === 39) {
			keys.right = 0
		}

		log('up', keyCode, keys)
	}

	window.addEventListener('keydown', keydown)
	window.addEventListener('keyup', keyup)

</script>

</body>

